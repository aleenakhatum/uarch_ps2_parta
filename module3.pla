module fsm(
    input clk,
    input rst,
    input x,
    output z
);

reg [0:0] state, next_state;

wire nx;
not1$ (nx, x);

wire ns0;

and2$(ns0_p1, !state[0], x);
and2$(ns0_p3, state[0], x);
or2$(ns0, ns0_p1, ns0_p3);

assign z_p1 = !state[0];
assign z_p3 = state[0];
or2$(z, z_p1, z_p3);

always @(posedge clk or posedge rst) begin
    if (rst) state <= 0;
    else state <= {ns0};
end

endmodule
