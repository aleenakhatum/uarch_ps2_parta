module fsm(
    input clk,
    input rst,
    input set,
    input x,
    output z
);

wire state0;
wire nstate0;

wire nx;
inv1$ u0 (nx, x);

wire ns0;

wire z_p3;
wire z_p1;
wire ns0_p3;
wire ns0_p1;

and2$ u1 (ns0_p1, nstate0, x);
and2$ u2 (ns0_p3, state0, x);
or2$ u3 (ns0, ns0_p1, ns0_p3);

assign z_p1 = nstate0;
assign z_p3 = state0;
or2$ u4 (z, z_p1, z_p3);

dff$ u_dff0 (clk, ns0, state0, nstate0, rst, set);

endmodule
